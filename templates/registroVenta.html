<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tienda Sport - Ventas</title>
    <link rel="stylesheet" href="{{url_for('static',filename='dist/css/output.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='dist/css/flowbite.min.css')}}">
    <link rel="stylesheet" href="{{url_for('static',filename='dist/css/sweetalert2.min.css')}}">
    <script src="{{url_for('static',filename='src/js/sweetalert2.all.min.js')}}"></script>
</head>
<body> 
    {% include 'menu.html' %}

    <div class="p-4 sm:ml-64 h-screen">
        <div class="p-2 rounded-lg">
            <div class="grid grid-cols-2 mt-3 mb-8 h-full gap-4">
                <div class="flex items-center w-full h-full justify-start flex-col p-1 mx-auto text-gray-900 sm:grid-cols-3 xl:grid-cols-6 sm:p-1">
                    <h2 class="max-w-lg text-2xl text-center font-semibold leading-normal text-gray-900">LISTA DE PRODUCTOS</h2>
                    <div class="flex flex-wrap items-start w-full my-4 gap-6 items-end">
                        <div class="flex flex-wrap w-full p-4 gap-6 items-end">
                            <div class="bg-white dark:bg-gray-900">
                                <div class="relative mt-1 flex items-center gap-4 justify-center">
                                    <div class="flex flex-col text-gray-900 dark:text-white">
                                        <label for="tipo" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Buscar:</label>
                                        <input id="searchInput" oninput="buscar('tableProducts','searchInput')" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="relative overflow-x-auto shadow-md w-full text-center sm:rounded-lg">
                        <div class="relative overflow-x-auto shadow-md sm:rounded-lg rounded" style="height: 600px;" >
                            <table id="tableProducts" class="w-full text-sm text-center shadow-md rtl:text-right text-gray-500 h-80" >
                                <thead class="sticky top-0 w-full text-xs text-gray-700 text-center uppercase bg-gray-50 ">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            TIPO
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            REFERENCIA
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            DISPONIBLES
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            PRECIO
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            CANTIDAD
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tabPro" class="shadow-md">
                                    <td></td>
                                    <td></td>
                                    <td>No hay productos registrados.</td>
                                    <td></td>
                                    <td></td>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="flex flex-col mb-2 w-full h-full items-center justify-center rounded">
                    <div class="flex flex-col w-full items-center justify-center rounded">
                        <h2 class="max-w-lg text-2xl mb-2 font-semibold leading-normal text-gray-900">INFORMACIÓN DE LA VENTA</h2>
                        <div class="relative mt-1 mb-4 flex items-start gap-4 justify-center">
                            <div class="flex flex-col text-gray-900 dark:text-white">
                                <label for="tipoVenta" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Tipo de Pago:</label>
                                <select id="tipoVenta" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                                    <option value="De contado">De contado</option>
                                    <option value="Fiado">Fiado</option>
                                </select>
                            </div>
                            <div class="flex flex-col text-gray-900 dark:text-white">
                                <label for="selectCli" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Seleccionar cliente:</label>
                                <select id="selectCli"  class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                                    <option value="1">Seleccionar cliente</option>
                                </select>
                            </div>
                            <div class="flex items-start my-4 justify-center h-full rounded flex-col">
                                <div class="transition-all ease-in duration-75">
                                    <button id="registroClienteBtn"  data-dropdown-toggle="registroCliente" data-dropdown-placement="left-start" type="button" class="flex items-center w-full p-2 font-medium rtl:text-right rounded-md bg-indigo-50 hover:bg-indigo-200">
                                        <svg class="w-5 h-5 text-indigo-400" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                                            <path fill-rule="evenodd" d="M9 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm-2 9a4 4 0 0 0-4 4v1a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-1a4 4 0 0 0-4-4H7Zm8-1a1 1 0 0 1 1-1h1v-1a1 1 0 1 1 2 0v1h1a1 1 0 1 1 0 2h-1v1a1 1 0 1 1-2 0v-1h-1a1 1 0 0 1-1-1Z" clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                    <div id="registroCliente"  class="flex flex-col p-3 z-10 hidden text-base list-none bg-indigo-100 rounded-lg shadow-md items-center justify-center">
                                        <div class="transition-all ease-in duration-75 mt-3 mb-3 flex items-center gap-4 justify-center">
                                            <div class="flex flex-col">
                                                <label for="nombreCli" class="block mb-2 text-sm font-medium">Nombre del cliente:</label>
                                                <input type="text" id="nombreCli" class=" border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="Nombre del cliente" required />
                                            </div>
                                            <div class="flex flex-col">
                                                <label for="numeroCli" class="block mb-2 text-sm font-medium ">Celular del cliente:</label>
                                                <input type="text" id="numeroCli" data-input-counter maxlength="10" class=" border border-gray-300 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5" placeholder="Celular del cliente" required />
                                            </div>
                                        </div>
                                        <div class=" relative mx-auto w-full flex flex-col justify-center inline-flex  items-center">
                                            <button onclick="registrarCliente()" class="relative inline-flex items-center mt-2 justify-center p-0.5 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-green-400 to-blue-600 group-hover:from-green-400 group-hover:to-blue-600 hover:text-white  focus:ring-4 focus:outline-none focus:ring-green-200">
                                                <span class="relative px-5 py-2.5 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0">
                                                    REGISTRAR CLIENTE
                                                </span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col w-full mt-3 items-center justify-center rounded">
                        <h2 class="max-w-lg text-2xl font-semibold leading-normal text-gray-900">CARRITO</h2>
                        <div class="relative overflow-x-auto shadow-md mt-6 sm:rounded-lg">
                            <table class="w-full text-sm text-center rtl:text-right text-gray-500 ">
                                <thead class="w-full text-xs text-gray-700 text-center uppercase bg-gray-50  ">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">
                                            TIPO
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            REFERENCIA
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            CANTIDAD
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            PRECIO
                                        </th>
                                        <th scope="col" class="px-6 py-3">
                                            DESCUENTO
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="tabBody" class="text-center w-full">
                                    <tr><td></td><td></td><td>Carrito está vacio</td><td></td><td></td></tr>
                                </tbody>
                            </table>
                        </div>
                        <button onclick="enviarVenta()"  class="relative inline-flex items-center mt-6 justify-center p-0.5 mb-2 me-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-green-400 to-blue-600 group-hover:from-green-400 group-hover:to-blue-600 hover:text-white  focus:ring-4 focus:outline-none focus:ring-green-200 ">
                            <span class="relative px-4 py-2 transition-all ease-in duration-75 bg-white  rounded-md group-hover:bg-opacity-0">
                            REGISTRAR VENTA
                            </span>
                        </button>

                    </div>
                </div>
            </div>
            
            {% include 'footer.html' %}
    </div>
    <script src="{{url_for('static',filename='src/js/axios.min.js')}}"></script>
    <script src="{{url_for('static',filename='src/js/flowbite.min.js')}}"></script>
    <script>
        var productos = {{ productos | tojson }};
        var clientes = {{ clientes | tojson }};
        var carrito = [];
        const tabBody = document.getElementById('tabBody');

        //Swal.fire("SweetAlert2 is working!", "Bienvenido a la ventana de Ventas", "info");
    </script>
    <script src="{{url_for('static',filename='src/js/inputs.js')}}"></script>
    <script src="{{url_for('static',filename='src/js/ventasFunctions.js')}}"></script>
    <script src="{{url_for('static',filename='src/js/formatoMoneda.js')}}"></script>
    <script src="{{url_for('static',filename='src/js/tables.js')}}"></script>
</body>
</html>